<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" href="/favicon.png" type="image/png">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <title>REISTOQ - Sistema de Gest√£o de Estoque</title>
    <meta name="description" content="Sistema completo de gest√£o de estoque e e-commerce com integra√ß√£o Mercado Livre, Shopee e Tiny ERP" />
    <meta name="author" content="REISTOQ" />

    <meta property="og:title" content="REISTOQ - Sistema de Gest√£o de Estoque" />
    <meta property="og:description" content="Sistema completo de gest√£o de estoque e e-commerce com integra√ß√£o Mercado Livre, Shopee e Tiny ERP" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@lovable_dev" />
    <meta name="twitter:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />
  </head>

  <body>
    <div id="root"></div>
    <div id="portal-root"></div>
    
    <!-- ‚úÖ REACT LOADING MONITOR -->
    <script>
      console.log('üîµ [Index] HTML carregado, aguardando React...');
      
      // Monitor React loading status
      window.reactLoadStatus = {
        started: false,
        loaded: false,
        error: null
      };
      
      // Captura erros cr√≠ticos de React
      window.addEventListener('error', function(e) {
        const errorMsg = e.message || '';
        console.error('üî¥ [Global Error]:', errorMsg, e);
        
        // Detecta erro de useState (React n√£o carregado)
        if (errorMsg.includes('useState') || errorMsg.includes('Cannot read properties of null')) {
          console.error('üö® CRITICAL: React useState error - React may not be loaded correctly');
          window.reactLoadStatus.error = errorMsg;
          
          const root = document.getElementById('root');
          if (root && !root.innerHTML) {
            root.innerHTML = `
              <div style="min-height: 100vh; display: flex; align-items: center; justify-content: center; background: #1a1a1a; color: #fff; font-family: system-ui; flex-direction: column; padding: 20px;">
                <div style="text-align: center; max-width: 600px;">
                  <h1 style="font-size: 2rem; margin-bottom: 1rem;">‚ö†Ô∏è Erro de Carregamento</h1>
                  <p style="margin-bottom: 1rem; color: #a3a3a3;">O React n√£o foi carregado corretamente. Isso pode ser causado por cache corrompido.</p>
                  <p style="margin-bottom: 2rem; color: #a3a3a3; font-size: 0.9rem;">Erro: ${errorMsg}</p>
                  <div style="display: flex; gap: 10px; justify-content: center; flex-wrap: wrap;">
                    <button onclick="window.location.reload(true)" style="padding: 12px 24px; background: #3b82f6; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 1rem;">
                      Recarregar (Ctrl+Shift+R)
                    </button>
                    <button onclick="clearCacheAndReload()" style="padding: 12px 24px; background: #ef4444; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 1rem;">
                      Limpar Cache e Recarregar
                    </button>
                  </div>
                  <p style="margin-top: 2rem; color: #737373; font-size: 0.85rem;">
                    Se o erro persistir, tente:<br>
                    1. Limpar cache do navegador (Ctrl+Shift+Delete)<br>
                    2. Usar janela an√¥nima<br>
                    3. Tentar outro navegador
                  </p>
                </div>
              </div>
            `;
          }
        }
      });
      
      function clearCacheAndReload() {
        console.log('üîÑ Limpando cache e recarregando...');
        try {
          localStorage.clear();
          sessionStorage.clear();
          // Limpa cache de service worker se existir
          if ('caches' in window) {
            caches.keys().then(names => {
              names.forEach(name => caches.delete(name));
            });
          }
        } catch (e) {
          console.warn('‚ö†Ô∏è Cache clear warning:', e);
        }
        setTimeout(() => {
          window.location.reload(true);
        }, 100);
      }
    </script>
    
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
